# 第2章 需求分析

## 2.1 可行性分析

可行性分析是系统开发前的重要环节，需要从技术、经济和运行等多个方面评估项目的可行性，为项目决策提供依据。

### 2.1.1 技术可行性

**开发技术成熟度：**

1. **Django框架**
   - Django是成熟稳定的Web开发框架，拥有完善的文档和活跃的社区
   - 提供了ORM、模板系统、用户认证等完整功能
   - 开发效率高，代码可维护性强
   - 技术风险低，可行性高

2. **协同过滤算法**
   - 协同过滤是经典的推荐算法，理论成熟，应用广泛
   - NumPy库提供了高效的矩阵运算支持
   - 算法实现难度适中，可行性高

3. **数据库技术**
   - SQLite是轻量级数据库，无需复杂配置
   - Django ORM提供了良好的数据库抽象
   - 数据存储和查询技术成熟，可行性高

4. **前端技术**
   - HTML5、CSS3、JavaScript是标准的Web前端技术
   - 浏览器兼容性好，开发资源丰富
   - 技术门槛低，可行性高

**开发团队技术能力：**

开发团队具备以下技术能力：
- 熟练掌握Python编程语言
- 了解Django框架的使用
- 掌握Web前端开发技术
- 具备数据库设计和使用经验
- 了解推荐算法的基本原理

**技术可行性结论：**

本项目采用的技术均为成熟技术，开发团队具备相应的技术能力，技术风险可控，技术可行性高。

### 2.1.2 经济可行性

**开发成本分析：**

1. **硬件成本**
   - 开发设备：使用现有计算机设备，无需额外投入
   - 服务器：使用云服务器，成本可控
   - 总计：硬件成本低

2. **软件成本**
   - Django框架：开源免费
   - Python：开源免费
   - SQLite：开源免费
   - 开发工具：使用免费的开源工具
   - 总计：软件成本为零

3. **人力成本**
   - 开发周期：约2-3周
   - 开发人员：1-2人
   - 人力成本：可控

4. **运维成本**
   - 服务器租用：月费用较低
   - 维护成本：较低
   - 总计：运维成本可控

**经济效益分析：**

1. **直接效益**
   - 提升家庭购物效率，节省时间成本
   - 智能推荐减少遗漏购买，避免紧急购买的额外成本
   - 避免重复购买，减少浪费

2. **间接效益**
   - 提升用户购物体验，增加用户粘性
   - 为电商平台开拓家庭市场提供技术支持
   - 积累用户数据，为后续优化提供基础

**经济可行性结论：**

本项目开发成本低，主要使用开源免费技术，经济投入小，预期效益明显，经济可行性高。

### 2.1.3 运行可行性

**系统运行环境：**

1. **服务器环境**
   - 操作系统：Linux（广泛使用，稳定可靠）
   - Python环境：易于部署和维护
   - 数据库：SQLite无需额外配置
   - 运行环境简单，易于部署

2. **用户访问环境**
   - 浏览器：支持主流浏览器（Chrome、Firefox、Safari等）
   - 设备：支持PC、平板、手机等多种设备
   - 网络：普通网络环境即可访问
   - 用户使用门槛低

**系统维护：**

1. **日常维护**
   - 数据备份：定期备份数据库
   - 日志监控：监控系统运行状态
   - 性能优化：根据使用情况优化性能
   - 维护工作量适中

2. **功能扩展**
   - Django框架支持模块化开发
   - 代码结构清晰，易于扩展
   - 可根据需求灵活添加新功能

**用户接受度：**

1. **操作简便性**
   - 界面友好，操作直观
   - 符合用户使用习惯
   - 学习成本低

2. **功能实用性**
   - 解决家庭购物的实际痛点
   - 智能推荐提升购物效率
   - 用户接受度高

**运行可行性结论：**

系统运行环境简单，部署和维护方便，用户使用门槛低，接受度高，运行可行性强。

### 2.1.4 可行性分析总结

通过对技术、经济和运行三个方面的可行性分析，可以得出以下结论：

1. **技术可行**：采用成熟技术，开发团队具备相应能力，技术风险低。
2. **经济可行**：开发成本低，预期效益明显，投资回报率高。
3. **运行可行**：系统易于部署和维护，用户接受度高，运行风险小。

综合以上分析，本项目在技术、经济和运行方面均具有较高的可行性，可以进入系统设计和开发阶段。

## 2.2 非功能性需求分析

非功能性需求是指系统在性能、安全性、可靠性、可维护性等方面的要求，这些需求对系统的质量和用户体验有重要影响。

### 2.2.1 性能需求

**响应时间要求：**

1. **页面加载时间**
   - 首页加载时间：≤ 2秒
   - 商品列表页加载时间：≤ 3秒
   - 商品详情页加载时间：≤ 2秒
   - 其他页面加载时间：≤ 2秒

2. **操作响应时间**
   - 用户登录：≤ 1秒
   - 添加购物车：≤ 0.5秒
   - 搜索商品：≤ 2秒
   - 生成推荐：≤ 3秒
   - 订单提交：≤ 2秒

**并发处理能力：**

1. **用户并发**
   - 支持至少50个用户同时在线
   - 支持至少10个用户同时下单

2. **数据处理**
   - 支持400个商品的管理
   - 支持1000条以上的用户行为记录
   - 推荐算法计算时间：≤ 5秒

**数据库性能：**

1. **查询效率**
   - 单表查询：≤ 100ms
   - 多表关联查询：≤ 500ms
   - 复杂统计查询：≤ 1秒

2. **数据容量**
   - 支持至少100个家庭
   - 支持至少500个用户
   - 支持至少10000条订单记录

### 2.2.2 安全性需求

**用户认证安全：**

1. **密码安全**
   - 密码采用哈希加密存储
   - 支持密码强度验证
   - 防止密码暴力破解

2. **会话管理**
   - 使用Django内置的会话管理机制
   - 会话超时自动登出
   - 防止会话劫持

**数据安全：**

1. **数据加密**
   - 敏感数据加密存储
   - 传输过程使用HTTPS（生产环境）

2. **数据访问控制**
   - 用户只能访问自己的数据
   - 家庭成员只能访问本家庭数据
   - 管理员拥有完整的数据访问权限

**系统安全：**

1. **SQL注入防护**
   - 使用Django ORM防止SQL注入
   - 对用户输入进行验证和过滤

2. **XSS攻击防护**
   - 对用户输入进行HTML转义
   - 使用Django模板系统的自动转义功能

3. **CSRF攻击防护**
   - 使用Django的CSRF保护机制
   - 所有表单提交都需要CSRF令牌

### 2.2.3 可靠性需求

**系统稳定性：**

1. **可用性**
   - 系统可用率：≥ 99%
   - 计划内停机时间：≤ 1小时/月
   - 非计划停机时间：≤ 2小时/月

2. **容错能力**
   - 数据库连接失败时自动重试
   - 异常情况下友好的错误提示
   - 关键操作支持事务回滚

**数据可靠性：**

1. **数据完整性**
   - 使用数据库约束保证数据完整性
   - 关键操作使用事务处理
   - 定期进行数据一致性检查

2. **数据备份**
   - 每日自动备份数据库
   - 保留至少7天的备份数据
   - 支持数据恢复功能

**错误处理：**

1. **异常捕获**
   - 捕获并记录所有异常
   - 向用户显示友好的错误信息
   - 关键错误及时通知管理员

2. **日志记录**
   - 记录系统运行日志
   - 记录用户操作日志
   - 记录错误和异常日志

### 2.2.4 可维护性需求

**代码可维护性：**

1. **代码规范**
   - 遵循PEP 8 Python代码规范
   - 使用有意义的变量和函数命名
   - 添加必要的代码注释

2. **代码结构**
   - 采用MVC架构，模块划分清晰
   - 代码复用性高，耦合度低
   - 易于理解和修改

**文档完整性：**

1. **开发文档**
   - 系统设计文档
   - 数据库设计文档
   - API接口文档

2. **用户文档**
   - 用户使用手册
   - 管理员操作指南
   - 常见问题解答

**系统可扩展性：**

1. **功能扩展**
   - 支持添加新的推荐算法
   - 支持添加新的商品分类
   - 支持添加新的用户功能

2. **性能扩展**
   - 支持数据库迁移到MySQL等
   - 支持分布式部署
   - 支持缓存机制

### 2.2.5 可用性需求

**界面友好性：**

1. **视觉设计**
   - 界面美观，色彩搭配合理
   - 布局清晰，信息层次分明
   - 符合用户审美习惯

2. **交互设计**
   - 操作流程简单直观
   - 提供必要的操作提示
   - 支持快捷操作

**易用性：**

1. **学习成本**
   - 新用户能够快速上手
   - 提供操作引导
   - 功能易于发现和使用

2. **操作效率**
   - 减少用户操作步骤
   - 提供搜索和筛选功能
   - 支持批量操作

**兼容性：**

1. **浏览器兼容**
   - 支持Chrome、Firefox、Safari、Edge等主流浏览器
   - 兼容浏览器的最新版本和近两个版本

2. **设备兼容**
   - 支持PC端访问
   - 支持平板设备访问
   - 支持手机端访问（响应式设计）

3. **分辨率适配**
   - 支持1920×1080及以上分辨率
   - 支持1366×768常用分辨率
   - 支持移动设备常用分辨率

## 2.3 功能性需求分析

功能性需求是系统必须实现的核心功能，是系统开发的主要依据。本节将详细分析系统各模块的功能需求。

### 2.3.1 用户管理模块

**用户注册功能：**

1. **注册信息**
   - 用户名（必填，唯一）
   - 密码（必填，默认123456）
   - 家庭名称（必填）

2. **注册流程**
   - 用户填写注册信息
   - 系统验证用户名是否已存在
   - 系统检查家庭是否存在，不存在则自动创建
   - 创建用户账号并关联到家庭
   - 为新家庭创建家庭画像和购物车
   - 注册成功，跳转到登录页面

3. **业务规则**
   - 一个用户只能属于一个家庭
   - 一个家庭可以有多个用户
   - 家庭名称可以重复（多个家庭可以同名）
   - 用户名必须唯一

**用户登录功能：**

1. **登录方式**
   - 用户名+密码登录
   - 支持普通用户登录
   - 支持管理员登录

2. **登录流程**
   - 用户输入用户名和密码
   - 系统验证用户身份
   - 验证成功，创建会话
   - 跳转到首页或管理后台

3. **权限区分**
   - 普通用户：访问前台功能
   - 管理员（mallory）：访问管理后台

**用户信息管理：**

1. **查看个人信息**
   - 用户名
   - 所属家庭
   - 注册时间

2. **修改个人信息**
   - 修改密码
   - 修改邮箱（可选）

### 2.3.2 家庭管理模块

**家庭创建功能：**

1. **创建时机**
   - 用户注册时自动创建
   - 管理员手动创建

2. **家庭信息**
   - 家庭名称
   - 创建时间
   - 成员列表

**家庭画像管理：**

1. **画像内容**
   - 偏好商品分类列表
   - 至少选择5个分类

2. **画像设置**
   - 家庭成员可以设置画像
   - 同一家庭成员共享画像
   - 画像影响推荐结果

3. **画像应用**
   - 推荐算法考虑家庭画像
   - 优先推荐偏好分类的商品

**家庭成员管理：**

1. **查看成员**
   - 显示家庭所有成员
   - 显示成员注册时间

2. **成员权限**
   - 所有成员权限相同
   - 都可以使用购物车
   - 都可以进行结算

### 2.3.3 商品管理模块

**商品信息管理：**

1. **商品基本信息**
   - 商品名称
   - 商品分类
   - 商品价格
   - 商品库存
   - 商品描述
   - 商品图片（可选）

2. **商品生命周期**
   - 生命周期天数（如30天、60天等）
   - 用于智能补货提醒
   - 剩余30%时触发推荐

**商品分类管理：**

1. **分类信息**
   - 分类名称
   - 分类描述
   - 分类下的商品数量

2. **分类列表**
   - 食品饮料
   - 生鲜果蔬
   - 美妆护肤
   - 个人护理
   - 家居清洁
   - 厨房用品
   - 家居装饰
   - 床上用品
   - 母婴用品
   - 宠物用品
   - 数码配件
   - 运动健身
   - 图书文具
   - 服装鞋帽
   - 箱包配饰

**商品浏览功能：**

1. **商品列表展示**
   - 显示商品图片
   - 显示商品名称
   - 显示商品价格
   - 显示商品分类
   - 显示库存状态

2. **商品筛选**
   - 按分类筛选
   - 按价格排序
   - 按时间排序

3. **商品搜索**
   - 按商品名称搜索
   - 按商品描述搜索
   - 实时搜索结果

**商品详情功能：**

1. **详情展示**
   - 商品完整信息
   - 商品详细描述
   - 商品生命周期
   - 库存状态

2. **相关推荐**
   - 显示同分类商品
   - 显示相似商品

3. **操作功能**
   - 加入购物车
   - 立即购买
   - 返回列表

### 2.3.4 购物车模块

**购物车特性：**

1. **家庭共享**
   - 同一家庭成员共享购物车
   - 任何成员添加的商品都可见
   - 任何成员都可以修改购物车

2. **购物车隔离**
   - 不同家庭的购物车完全隔离
   - 无法查看其他家庭的购物车

**购物车功能：**

1. **添加商品**
   - 从商品列表添加
   - 从商品详情添加
   - 从推荐列表添加
   - 记录加购行为

2. **修改数量**
   - 增加商品数量
   - 减少商品数量
   - 直接输入数量
   - 检查库存限制

3. **删除商品**
   - 单个删除
   - 批量删除（可选）

4. **购物车展示**
   - 显示商品列表
   - 显示商品单价
   - 显示商品数量
   - 显示小计
   - 显示总价
   - 显示商品总数

**结算功能：**

1. **结算权限**
   - 所有家庭成员都可以结算
   - 记录下单用户

2. **结算流程**
   - 检查库存
   - 创建订单
   - 扣减库存
   - 记录购买行为
   - 清空购物车
   - 跳转到订单详情

### 2.3.5 订单管理模块

**订单创建：**

1. **订单信息**
   - 订单号（自动生成）
   - 所属家庭
   - 下单用户
   - 订单状态
   - 订单总价
   - 创建时间

2. **订单项信息**
   - 商品信息
   - 购买数量
   - 购买单价
   - 购买时间

**订单状态：**

1. **状态类型**
   - 待支付
   - 已支付
   - 已发货
   - 已完成
   - 已取消

2. **状态流转**
   - 创建订单：待支付
   - 支付成功：已支付
   - 商家发货：已发货
   - 确认收货：已完成
   - 取消订单：已取消

**订单查询：**

1. **查询方式**
   - 查看所有订单
   - 按状态筛选
   - 按时间排序

2. **订单详情**
   - 订单基本信息
   - 订单商品列表
   - 订单状态
   - 订单金额

### 2.3.6 推荐系统模块

**推荐算法：**

1. **基于用户的协同过滤**
   - 计算用户相似度
   - 找到相似用户
   - 推荐相似用户喜欢的商品

2. **基于商品的协同过滤**
   - 计算商品相似度
   - 找到相似商品
   - 推荐用户喜欢商品的相似商品

3. **算法融合**
   - 加权融合两种算法
   - 权重系数α=0.5
   - 归一化处理

4. **生命周期推荐**
   - 监控已购商品使用时间
   - 剩余30%时提升推荐权重
   - 智能补货提醒

**用户行为追踪：**

1. **行为类型**
   - 浏览行为（权重=1）
   - 加购行为（权重=3）
   - 购买行为（权重=5）

2. **行为记录**
   - 自动记录用户行为
   - 存储行为时间
   - 用于推荐算法计算

**推荐展示：**

1. **推荐位置**
   - 首页推荐列表
   - 商品详情页相关推荐

2. **推荐数量**
   - 首页Top 10推荐
   - 详情页Top 4相关推荐

3. **推荐更新**
   - 实时计算推荐结果
   - 根据用户行为动态调整

### 2.3.7 管理员模块

**用户管理：**

1. **用户列表**
   - 查看所有用户
   - 搜索用户
   - 筛选用户

2. **用户操作**
   - 添加用户
   - 编辑用户信息
   - 删除用户
   - 重置密码

**商品管理：**

1. **商品列表**
   - 查看所有商品
   - 搜索商品
   - 按分类筛选

2. **商品操作**
   - 添加商品
   - 编辑商品信息
   - 修改价格和库存
   - 删除商品

**订单管理：**

1. **订单列表**
   - 查看所有订单
   - 按状态筛选
   - 搜索订单

2. **订单操作**
   - 查看订单详情
   - 修改订单状态
   - 取消订单

**数据统计：**

1. **用户统计**
   - 用户总数
   - 家庭总数
   - 新增用户

2. **商品统计**
   - 商品总数
   - 分类统计
   - 库存统计

3. **订单统计**
   - 订单总数
   - 销售额统计
   - 订单状态分布

**用户行为分析：**

1. **行为查看**
   - 查看所有用户行为
   - 按类型筛选
   - 按用户筛选

2. **行为分析**
   - 用户活跃度分析
   - 商品热度分析
   - 购买转化率分析

### 2.3.8 个人中心模块

**用户信息展示：**

1. **基本信息**
   - 用户名
   - 所属家庭
   - 注册时间

2. **统计信息**
   - 订单数量
   - 购物车商品数

**订单历史：**

1. **订单列表**
   - 显示最近订单
   - 显示订单状态
   - 显示订单金额

2. **订单操作**
   - 查看订单详情
   - 取消订单（待支付状态）

**家庭画像设置：**

1. **查看画像**
   - 显示当前偏好分类

2. **修改画像**
   - 选择偏好分类
   - 至少选择5个
   - 保存设置

### 2.3.9 系统功能需求总结

通过以上分析，系统主要功能模块包括：

1. **用户管理模块**：用户注册、登录、信息管理
2. **家庭管理模块**：家庭创建、画像管理、成员管理
3. **商品管理模块**：商品展示、搜索、分类、详情
4. **购物车模块**：家庭共享购物车、商品管理、结算
5. **订单管理模块**：订单创建、查询、状态管理
6. **推荐系统模块**：协同过滤算法、行为追踪、智能推荐
7. **管理员模块**：数据管理、统计分析、系统维护
8. **个人中心模块**：信息展示、订单历史、画像设置

这些功能模块相互配合，共同构成了一个完整的家用商品推荐系统，满足了家庭用户的购物需求和系统管理需求。

本章从可行性、非功能性需求和功能性需求三个方面对系统进行了全面分析，为后续的系统设计和实现提供了明确的需求依据。

