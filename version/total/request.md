# 基于Django的家用商品推荐系统

## 文档说明

本文档是基于Django框架开发的家用商品推荐系统的完整技术文档，按照学术论文格式编写，包含绪论、需求分析、系统设计和系统实现四个主要章节。

## 文档结构

本文档分为以下几个部分：

### 第1章 绪论
- 1.1 课题研发背景与意义
- 1.2 国内外研究现状
- 1.3 课题研究的内容
- 1.4 课题相关的技术

详见：`第1章_绪论.md`

### 第2章 需求分析
- 2.1 可行性分析
- 2.2 非功能性需求分析
- 2.3 功能性需求分析

详见：`第2章_需求分析.md`

### 第3章 系统设计
- 3.1 系统架构介绍
- 3.2 系统的主要流程设计
- 3.3 数据库设计

详见：`第3章_系统设计.md`

### 第4章 系统的实现
- 4.1 系统首页的实现
- 4.2 用户与家庭模块
- 4.3 管理员模块
- 4.4 算法模块
- 4.5 购物车与订单模块
- 4.6 商品模块

详见：`第4章_系统实现_上.md` 和 `第4章_系统实现_下.md`

## 系统概述

### 系统名称
基于Django的家用商品推荐系统

### 开发技术
- **后端框架**：Django 4.2
- **编程语言**：Python 3.9
- **数据库**：SQLite 3
- **算法库**：NumPy 2.0
- **前端技术**：HTML5, CSS3, JavaScript

### 核心功能

1. **用户管理**
   - 用户注册（自动创建家庭）
   - 用户登录/登出
   - 权限管理

2. **家庭管理**
   - 家庭自动创建
   - 家庭画像管理
   - 家庭成员协同

3. **商品管理**
   - 商品展示（400个商品，15个分类）
   - 商品搜索和筛选
   - 商品生命周期管理

4. **购物车系统**
   - 家庭共享购物车
   - 购物车隔离
   - 商品管理和结算

5. **订单系统**
   - 订单创建和管理
   - 订单状态跟踪
   - 订单历史查询

6. **推荐系统**
   - 基于用户的协同过滤
   - 基于商品的协同过滤
   - 混合推荐策略
   - 生命周期智能推荐

7. **管理员后台**
   - 用户管理
   - 商品管理
   - 订单管理
   - 数据统计分析

8. **个人中心**
   - 用户信息展示
   - 订单历史
   - 家庭画像设置

### 系统特色

1. **家庭消费模式**
   - 以家庭为单位的用户模型
   - 家庭成员共享购物车
   - 家庭画像个性化推荐

2. **智能推荐算法**
   - 双重协同过滤融合
   - 余弦相似度计算
   - 评分归一化处理
   - 加权融合策略

3. **生命周期管理**
   - 商品使用周期跟踪
   - 智能补货提醒
   - 剩余30%自动推荐

4. **用户行为追踪**
   - 浏览行为（权重=1）
   - 加购行为（权重=3）
   - 购买行为（权重=5）

5. **现代化界面**
   - 紫色渐变主题
   - 流畅动画效果
   - 响应式设计

### 数据统计

**测试数据：**
- 用户数量：40个
- 家庭数量：20个
- 商品分类：15个
- 商品总数：400个
- 用户行为：683条
- 订单数量：67个

**商品分类：**
1. 食品饮料
2. 生鲜果蔬
3. 美妆护肤
4. 个人护理
5. 家居清洁
6. 厨房用品
7. 家居装饰
8. 床上用品
9. 母婴用品
10. 宠物用品
11. 数码配件
12. 运动健身
13. 图书文具
14. 服装鞋帽
15. 箱包配饰

### 系统架构

```
表现层（前端）
    ↓
业务逻辑层（Django MVT）
    ├─ URL路由层
    ├─ 视图层
    └─ 模板层
    ↓
数据访问层（Django ORM）
    ├─ 模型层（10个数据模型）
    └─ 数据库操作
    ↓
数据存储层（SQLite）
```

### 数据模型

1. **User** - 用户模型
2. **Family** - 家庭模型
3. **FamilyProfile** - 家庭画像
4. **Category** - 商品分类
5. **Product** - 商品
6. **Cart** - 购物车
7. **CartItem** - 购物车项
8. **Order** - 订单
9. **OrderItem** - 订单项
10. **UserBehavior** - 用户行为

### 推荐算法

**算法流程：**

1. 构建用户-商品评分矩阵
2. 计算用户相似度（余弦相似度）
3. 计算商品相似度（余弦相似度）
4. 生成基于用户的推荐评分
5. 生成基于商品的推荐评分
6. 归一化评分
7. 加权融合（α=0.5）
8. 提升生命周期商品权重
9. 返回Top 10推荐结果

**数学公式：**

余弦相似度：
```
sim(A, B) = cos(θ) = (A · B) / (||A|| × ||B||)
```

加权融合：
```
final_score = α × user_based_score + (1-α) × item_based_score
```

归一化：
```
normalized_score = (score - min) / (max - min)
```

### 系统部署

**运行环境：**
- 操作系统：Linux
- Python版本：3.9
- Django版本：4.2
- 端口：8080

**启动命令：**
```bash
cd /www/wwwroot/version3/version
python manage.py runserver 0.0.0.0:8080
```

**访问地址：**
- 用户前端：http://服务器IP:8080/
- 管理后台：http://服务器IP:8080/admin/

**登录信息：**
- 管理员：mallory / 123456
- 测试用户：user1-user40 / 123456

### 系统评估

**评估指标：**
- 准确率（Precision）
- 召回率（Recall）
- F1分数

**评估命令：**
```bash
python scripts/evaluate_recommender.py
```

### 项目文件

```
version3/version/
├── manage.py                  # Django管理脚本
├── requirements.txt           # 依赖列表
├── db.sqlite3                # 数据库
├── version/                  # 项目配置
│   ├── settings.py          # 配置文件
│   ├── urls.py              # URL路由
│   └── wsgi.py              # WSGI配置
├── shop/                     # 主应用
│   ├── models.py            # 数据模型
│   ├── views.py             # 视图函数
│   ├── urls.py              # URL配置
│   ├── admin.py             # 后台管理
│   ├── recommender.py       # 推荐算法
│   └── migrations/          # 数据库迁移
├── templates/                # HTML模板
│   ├── base.html
│   ├── login.html
│   ├── register.html
│   ├── home.html
│   ├── products.html
│   ├── product_detail.html
│   ├── cart.html
│   ├── profile.html
│   └── order_detail.html
├── static/                   # 静态文件
│   ├── css/
│   └── js/
├── scripts/                  # 工具脚本
│   ├── generate_test_data.py
│   └── evaluate_recommender.py
└── total/                    # 文档目录
    ├── need.md              # 需求文档
    ├── request.md           # 本文档
    ├── 第1章_绪论.md
    ├── 第2章_需求分析.md
    ├── 第3章_系统设计.md
    ├── 第4章_系统实现_上.md
    └── 第4章_系统实现_下.md
```

### 创新点

1. **家庭消费模型**：首次将家庭作为消费单元进行建模
2. **共享购物车**：实现家庭成员之间的购物协同
3. **生命周期推荐**：将商品使用周期引入推荐系统
4. **混合推荐策略**：融合多种协同过滤算法
5. **家庭画像**：构建家庭级用户画像

### 应用价值

1. **提升购物效率**：家庭成员协同购物，避免重复和遗漏
2. **智能补货提醒**：基于生命周期的自动提醒
3. **个性化推荐**：结合家庭画像的精准推荐
4. **商业价值**：为电商平台开拓家庭市场

### 技术亮点

1. **Django框架**：成熟稳定的Web开发框架
2. **协同过滤**：经典推荐算法的实际应用
3. **NumPy优化**：高效的矩阵运算
4. **响应式设计**：适配多种设备
5. **事务处理**：保证数据一致性

## 文档使用说明

1. 本文档按照学术论文格式编写，适合作为毕业设计或课程设计的技术文档
2. 各章节内容详见对应的独立文档文件
3. 文档包含完整的系统设计、实现和代码示例
4. 可根据实际需要进行修改和扩展

## 联系方式

如有问题，请查阅项目根目录下的其他文档：
- README.md - 项目说明
- DEPLOYMENT.md - 部署文档
- ADMIN_GUIDE.md - 管理员指南
- GUIDE.md - 用户指南

---

**文档编写日期**：2026年2月9日  
**系统版本**：1.0  
**文档状态**：已完成

